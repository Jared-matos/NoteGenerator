<!--Remove heading information when importing to Sharepoint-->
<!DOCTYPE html>
<html lang='en'>

<head>
  <meta charset='UTF-8' />
  <meta name='viewport' content='width=device-width, initial-scale=1.0' />
  <meta http-equiv='X-UA-Compatible' content='ie=edge' />
  <title>Static Template</title>
</head>

<style>
  .displayBlock {
    display: block;
  }
  .tableRow {
    display: table-row;
    font-family: calibri;
    size: 12pt;
    height: 25px;
  }
  .displayNone {
    display: none;
  }
  .displayAsCell {
    display: table-cell;
  }
  #tDiv span {
    display: table-cell;
    font-family: calibri;
    size: 12pt;
    width: 200px;
    vertical-align: middle;
  }
  #tDiv input[type='text'] {
    display: table-cell;
    font-family: calibri;
    size: 12pt;
    width: 100%;
  }
  #tDiv {
    height: 150px;
    width: 375px;
    border-radius: 10px;
    background-color: #f2f2f2;
    padding: 10px;
  }
  #tDiv button {
    max-height: 25px;
    min-width: 0px;
    padding: 2px 2px 2px 2px;
    margin-left: 1px;
  }
</style>

<div id='tDiv'>
  <!--Every call information-->
  <div>
    <div class='tableRow'>
      <span>Caller Type</span>
      <div class='displayAsCell'>
        <input type='radio' id='Member' name='MP' onclick='mpRadio()' value='Member'>
        <label>Member</label>
        <input type='radio' id='Provider' name='MP' onclick='mpRadio()' value='Provider'>
        <label>Provider</label>
      </div>
    </div>
    <div class='tableRow'>
      <span>Caller Name</span>
      <input type='text' id='callerName' autocomplete='off' list='autocompleteOff' />
    </div>
    <div class='tableRow'>
      <span>Callback Number</span>
      <input type='text' id='callbackNumber' autocomplete='off' list='autocompleteOff' />
    </div>
  </div>

  <!--Member info Section-->
  <div class='displayNone' id='mbrLine0'>
    <span>Relationship to Member</span>
    <input type='text' id='callerRel' autocomplete='off' list='autocompleteOff' />
  </div>

  <!--Provider info section-->
  <div class='displayNone' id='provInfoBlock'>
    <div class='tableRow'>
      <div class='displayAsCell'>
        <input type='radio' id='NPI' name='NPI/TIN' value='NPI' />
        <label>NPI</label>
        <input type='radio' id='TIN' name='NPI/TIN' value='TIN' />
        <label>TIN</label>
      </div>
      <input type='text' id='provIDText' autocomplete='off' list='autocompleteOff' />
    </div>
    <div class='tableRow'>
      <span>Facility Name</span>
      <input type='text' id='provNamesText' autocomplete='off' list='autocompleteOff' />
    </div>
    <div class='tableRow'>
      <span>Site Address</span>
      <input type='text' id='siteAddress' autocomplete='off' list='autocompleteOff' />
    </div>
  </div>

  <!--all call information-->
  <div class='tableRow'>
    <span>Confirmed address on file?</span>
    <input type='checkbox' id='confirmedAddress' />
  </div>
    <div class='displayBlock callTypeDivs' id='callTypeDiv0' onchange='callTypeSel()'>
    <div class='tableRow' id='callTypeRow'>
      <span>Call Type</span>
      <select id='callTypeSelect0' value=''>
        <option value=''></option>
        <option value='Authorization Status'>Authorization Status</option>
        <option value='Benefit/Eligibility Information'>Benefits/Eligibility</option>
        <option value='Claim Information'>Claim Information</option>
        <option value='Referral Request'>Referrals</option>
      </select>
      <button type='button' id='cloneCallTypeDivButton' onclick='cloneCallType()'>+</button>
    </div>

    <!--Auth Status-->
    <div class='displayNone callTypeHidden' id='callTypeBlock0-0'>
      <div class='tableRow'>
        <span>PasteBox</span>
        <textarea class='pasteBox' id='pasteBox0' rows=1 onchange='parseDataBenefits(this)'></textarea>
      </div>
      <div class='tableRow'>
        <span>Auth status</span>
        <select id='callTypeSelect0-0-0' value=''/>
          <option value=''></option>
          <option value='Approved'>Approved</option>
          <option value='Pended'>Pended</option>
          <option value='Denied'>Denied</option>
        </select>
      </div>
      <div class='tableRow'>
        <span>Approved Code</span>
        <input type='text' id='callTypeInput0-0-0' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Dates Approved</span>
        <input type='text' id='callTypeInput0-0-1' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Dates Requested</span>
        <input type='text' id='callTypeInput0-0-2' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Units Approved</span>
        <input type='text' id='callTypeInput0-0-3' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Units Requested</span>
        <input type='text' id='callTypeInput0-0-4' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Units Used</span>
        <input type='text' id='callTypeInput0-0-5' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>PA Number</span>
        <input type='text' id='callTypeInput0-0-6' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Date Approved</span>
        <input type='text' id='callTypeInput0-0-7' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Date Modified</span>
        <input type='text' id='callTypeInput0-0-8' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Other Information Given</span>
        <input type='text' id='callTypeInput0-0-9' autocomplete='off' list='autocompleteOff' />
      </div>
    </div>

    <!--Benefits/Eligibility-->
    <div class='displayNone callTypeHidden' id='callTypeBlock0-1'>
      <div class='tableRow'>
        <span>PasteBox</span>
        <textarea class='pasteBox' id='pasteBox1' rows=1 onchange='parseDataBenefits(this)'></textarea>
      </div>
      <div class='tableRow'>
        <span>Member Eligible Dates</span>
        <input type='text' id='callTypeInput0-1-0' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Benefit information Quoted</span>
        <input type='text' id='callTypeInput0-1-1' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Co-Pay Information Quoted</span>
        <input type='text' id='callTypeInput0-1-2' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Utilization Quoted</span>
        <input type='text' id='callTypeInput0-1-3' autocomplete='off' list='autocompleteOff' />
      </div>
    </div>

    <!--Claim Status-->
    <div class='displayNone callTypeHidden' id='callTypeBlock0-2'>
      <div class='tableRow'>
        <span>PasteBox</span>
        <textarea class='pasteBox' id='pasteBox2' rows=1 onchange='parseDataBenefits(this)'></textarea>
      </div>
      <div class='tableRow'>
        <span>DOS</span>
        <input type='text' id='callTypeInput0-2-0' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Procedure Code</span>
        <input type='text' id='callTypeInput0-2-1' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Recieved Date</span>
        <input type='text' id='callTypeInput0-2-2' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Processed Date</span>
        <input type='text' id='callTypeInput0-2-3' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Charged Units</span>
        <input type='text' id='callTypeInput0-2-4' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Allowed Units</span>
        <input type='text' id='callTypeInput0-2-5' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Charged Amount</span>
        <input type='text' id='callTypeInput0-2-6' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Allowed Amount</span>
        <input type='text' id='callTypeInput0-2-7' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Denial Code/Reason</span>
        <input type='text' id='callTypeInput0-2-8' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Claim Number</span>
        <input type='text' id='callTypeInput0-2-9' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Paid Via</span>
        <select id='callTypeselect0-2-0' value='' />
          <option value=''></option>
          <option value='ACH/EFT'>ACH/EFT</option>
          <option value='CHK'>CHK</option>
        </select>
      </div>
      <div class='tableRow'>
        <span>Check/Transaction Number</span>
        <input type='text' id='callTypeInput0-2-10' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Bulk Amount</span>
        <input type='text' id='callTypeInput0-2-11' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Payment Cleared Date</span>
        <input type='text' id='callTypeInput0-2-12' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Processed Correctly</span>
        <input type='checkbox' id='callTypeInput0-2-13' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='displayBlock'>
        <div class='tableRow'>
          <span>CE Called</span>
          <input type='checkbox' id='callTypeInput0-2-14' onclick='ceUpdate()'/>
        </div>
        <div class='displayNone ceCalledBlock' id='ceCalledBlock0'>
          <div class='tableRow'>
            <span>Initials of CE</span>
            <input type='text' id='callTypeInput0-2-15' autocomplete='off' list='autocompleteOff' />
          </div>
          <div class='tableRow'>
            <span>CE Advised</span>
            <input type='text' id='callTypeInput0-2-16' autocomplete='off' list='autocompleteOff' />
          </div>
        </div>
      </div>
      <div class='tableRow'>
        <span>Other Information Advised</span>
        <input type='text' id='callTypeInput0-2-17' autocomplete='off' list='autocompleteOff' />
      </div>
    </div>

    <!--Referral-->
    <div class='displayNone callTypeHidden' id='callTypeBlock0-3'>
      <div class='tableRow'>
        <span>Type of Referrals Requested</span>
        <input type='text' id='callTypeInput0-3-0' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Method Referrals Delivered</span>
        <input type='text' id='callTypeInput0-3-1' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Email/physical Address</span>
        <input type='text' id='callTypeInput0-3-2' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Referrals Given</span>
        <input type='text' id='callTypeInput0-3-3' autocomplete='off' list='autocompleteOff' />
      </div>
      <div class='tableRow'>
        <span>Sent to Member Service</span>
        <input type='checkbox' id='callTypeInput0-3-4' autocomplete='off' list='autocompleteOff' />
      </div>
    </div>
  </div>

  <!--Member Specific situations-->
  <div class='displayNone' id='mbrEnd'>
    <div class='tableRow'>
      <span>Member Satisfied?</span>
      <input type='checkbox' id='mbrSatisfied' onclick='msCheck()' />
    </div>
    <div class='displayBlock' id='mbrNSatisfied'>
      <div class='tableRow'>
        <span>Grievance offered?</span>
        <input type='checkbox' id='grievanceOffered' />
      </div>
      <div class='tableRow'>
        <span>Grievance Filed?</span>
        <input type='checkbox' id='grievanceFiled' />
      </div>
    </div>
  </div>

  <!--Button at bottom of form -->
  <div class='tableRow'>
    <textarea readonly type='text' class='displayNone' id='oText'></textarea>
    <button type='button' onclick='copyClipboard()'>Copy to Clipboard</button>
    <button type='button' onclick='clearAll()'>Clear All</button>
    <!--<button type='button' onclick='openNewWindow()'>New Window</button>-->
  </div>
</div>

<script src='https://code.jquery.com/jquery-1.12.4.js'></script>
<script src='https://code.jquery.com/ui/1.12.1/jquery-ui.js'></script>
<script src='http://code.jquery.com/jquery-1.11.0.min.js'></script>
<script type='text/javascript'>
  console.clear();
  var numCallTypes = 0;
  changeHeight();

  /*function openNewWindow(){
    var divText = document.getElementById('tDiv').outerHTML;
    var myWindow = window.open('', '', 'width=200,height=100');
    var doc = myWindow.document;
    doc.open();
    doc.write(divText);
    doc.close();
  }*/

  // creates clones of the callType div and changes the names of the clones children
  function cloneCallType() {
    /*
    Mapping out function 

    get last parent div
    create clone of parent div 
    increment numcalltypes 
    set clone div id to new increment
    set clone select to new increment 
    set clone select value to null
    set all input to new increment 
    set all input to null
    set all block to new increment 
    set all block to null 
    insert the clone after the parent 
    update call type fields 
    */

    var parent = document.getElementById('callTypeDiv' + numCallTypes);
    var clone = parent.cloneNode(true);
    numCallTypes += 1;
    clone.id = 'callTypeDiv' + numCallTypes;
    clone.getElementsByTagName('select')[0].id = 'callTypeSelect' + numCallTypes;
    clone.getElementsByTagName('select')[0].value = '';
    clone.getElementsByClassName('ceCalledBlock')[0].id = 'ceCalledBlock' + numCallTypes;

    //console.log('renamed:' + clone.id);
    //console.log('renamed:' + clone.getElementsByTagName('select')[0].id);

    var blocks = clone.getElementsByClassName('callTypeHidden');
    for(i = 0; i < blocks.length; i++) {
      if (blocks.item(i) === null) {
        alert('Error Occured, Reloading page. Please save information');
        location.reload();
      } else {
        blocks.item(i).id = 'callTypeBlock' + numCallTypes + '-' + i;

        //console.log('renamed:' + blocks.item(i).id);

        var inputs = blocks.item(i).getElementsByTagName('input');
        for(y = 0; y < inputs.length; y++) {
          inputs.item(y).id = 'callTypeInput' + numCallTypes + '-' + i + '-' + y;
          inputs.item(y).value = "";

          //console.log('renamed: '+inputs.item(y).id);
        }
        var selects = blocks.item(i).getElementsByTagName('select');
        for (y = 0; y < selects.length; y++) {
          selects.item(y).id = 'callTypeSelect' + numCallTypes + '-' + i + '-' + y;
          selects.item(y).value = "";
          //console.log('renamed: '+selects.item(y).id);
        }
      }
    }
    parent.after(clone);
    callTypeSel();
  }
// Looks at all created call types, in each identifies the ceCalled checkbox and toggles opening and closing the div
  function ceUpdate() {
    var divs = document.getElementsByClassName('callTypeDivs');
    for (i = 0; i < divs.length; i++) {
      var block = divs.item(i).getElementsByClassName('ceCalledBlock');
      for (y = 0; y < block.length; y++) {
        var num = block.item(y).id.slice(block.item(y).id.length - 1, block.item(y).id.length);
        if (document.getElementById('callTypeInput' + num + '-2-14').checked == true) {
          document.getElementById(block.item(y).id).className = 'displayBlock ceCalledBlock';
        } else {
          document.getElementById(block.item(y).id).className = 'displayNone ceCalledBlock';
        }
      }
    }
    changeHeight();
  }

  // Parses data input from the pasteboxes, puts the relevant information in the correct input fields
  function parseDataBenefits() {
    var divs = document.getElementsByClassName('callTypeDivs');
    for (i = 0; i < divs.length; i++) {
      var blocks = divs.item(i).getElementsByClassName('callTypeHidden');
      var divNum = divs.item(i).id.charAt(divs.item(i).id.length-1);
      for (y = 0; y < blocks.length; y++) {
        var currBlock = blocks.item(y);
        var blockNum = currBlock.id.charAt(currBlock.id.length-1);
        if (currBlock.getElementsByClassName('pasteBox').value !== "") {
          try { var pasteDataARR = currBlock.getElementsByClassName('pasteBox')[0].value.split(/\r?\n/);}
          catch(err) { break;}

          // Authorization Check 
          if (y == 0 && pasteDataARR[1] == 'Authorizations') {
            var legend = pasteDataARR[2];
            var authPaste = pasteDataARR[3];
            authPaste = authPaste.split('\t');
            legend = legend.split('\t');
            for (x = 0; x < authPaste.length; x++) {
              switch (x){
                case 0:
                  // provider id 
                  break;
                case 1:
                  // facility name 
                  break;
                case 2:
                  //approved proc 
                  document.getElementById('callTypeInput'+ divNum+'-0-0').value = authPaste[x];
                  break;
                case 3:
                  // # approved units 
                  document.getElementById('callTypeInput' + divNum + '-0-3').value = authPaste[x];
                  break;
                case 4:
                  // Approved start date  
                  document.getElementById('callTypeInput' + divNum + '-0-1').value = authPaste[x].split(' ')[0];
                  break;
                case 5:
                  // Approved end date
                  document.getElementById('callTypeInput' + divNum + '-0-1').value += ' - ' + authPaste[x].split(' ')[0];
                  break;
                case 6:
                  // decision 
                  if (authPaste[x].search('Denial') == -1){
                    document.getElementById('callTypeSelect' + divNum + '-0-0').value = authPaste[x];
                  } else {
                    document.getElementById('callTypeSelect' + divNum + '-0-0').value = 'Denied';
                  }
                  break;
                case 7:
                  // used units 
                  document.getElementById('callTypeInput' + divNum + '-0-5').value = authPaste[x];
                  break;
                case 8:
                  // o Units ?
                  break;
                case 9:
                  // o to date 
                  break;
                case 10:
                  // requested proc code 
                  break;
                case 11:
                  // requested units 
                  document.getElementById('callTypeInput' + divNum + '-0-4').value = authPaste[x];
                  break;
                case 12:
                  // requested from date 
                  document.getElementById('callTypeInput' + divNum + '-0-2').value = authPaste[x].split(' ')[0];
                  break;
                case 13:
                  // requested to date  
                  document.getElementById('callTypeInput' + divNum + '-0-2').value += ' - ' + authPaste[x].split(' ')[0];
                  break;
                case 14:
                  // auth number 
                  document.getElementById('callTypeInput' + divNum + '-0-6').value = authPaste[x];
                  break;
                case 15:
                  // created date  
                  document.getElementById('callTypeInput' + divNum + '-0-7').value = authPaste[x].split(' ')[0];
                  break;
                case 16:
                  // User Created Auth 
                  break;
                case 17:
                  // Latest Auth Update date 
                  document.getElementById('callTypeInput' + divNum + '-0-8').value = authPaste[x].split(' ')[0];
                  break;
                case 18:
                  // Review Id ?
                  break;
                case 19:
                  // # provider letters printed 
                  break;
                case 20:
                  // # member letters printed 
                  break;
                case 21:
                  // To Be Printed ?
                  break;
                case 22:
                  // Send to address for auth letter 
                  break;
                default: 
                  break;
              }
            }    
          }

          // Eligibility Check 
          if (y == 1 && pasteDataARR[1] == 'Eligibility Segment') {
            for (x = 0; x < pasteDataARR.length; x++) {
              switch(pasteDataARR[x].split('\t')[0]) {
                case 'DateBegin':
                  document.getElementById('callTypeInput' + divNum + '-1-0').value += pasteDataARR[x].split('\t')[1].split(' ')[0];
                  break;
                case 'DateEnd':
                  document.getElementById('callTypeInput' + divNum + '-1-0').value += ' - ' + pasteDataARR[x].split('\t')[1].split(' ')[0];
                  break;
                default:
                  break;
              }
            }
          }

          // Co-Pay Check
          if (y == 1 && pasteDataARR[1] == 'Co-Pays') {
            for (x = pasteDataARR.length; x >= 0 ; x--) {
              if (pasteDataARR[x] == '') {
                pasteDataARR.pop();
              }
            }
            var legend = pasteDataARR[2];
            var coPayPaste = pasteDataARR;
            for (x = 0; x < 3; x++){
              coPayPaste.shift();
            }
            var rows = coPayPaste.length;
            var tempArr = [];
            for (x = 0; x < coPayPaste.length; x++) {
               var tempArr2 = coPayPaste[x].split('\t');
              for (z = 0; z < tempArr2.length; z++) {
                tempArr.push(tempArr2[z]);
              }
            }
            coPayPaste = tempArr;
            console.log(coPayPaste);
            legend = legend.split('\t');
            for (x = 0; x < rows; x ++){
              for (z = 0; z < coPayPaste.length/2; z++){
                console.log('z=',z,legend[z],coPayPaste[z]);
                switch (z) {
                  case '0':
                    //copay type 
                    break;
                  case '1':
                    // copay range
                    break;
                  case '2':
                    //copay value
                    break;
                  case '3':
                    //network
                    break;
                  case '4':
                    //exclude from oop
                    break;
                  case '5':
                    //post deductible
                    break;
                  case '6':
                    //datefrom
                    break;
                  case '7':
                    //dateto
                    break;
                  case '8':
                    //username
                    break;
                  case '9':
                    //dateupdated
                    break;
                  case '10':
                    //description
                    break;
                  default: 
                    break;
                }
              }
            }
          }

          // Claims Check
          if (y == 2 && pasteDataARR[1] == 'Specific Claim Line') {
            for (x = 0; x < pasteDataARR.length; x++) {
              switch (pasteDataARR[x].split('\t')[0]) {
                case 'Dates Of Service':
                  document.getElementById('callTypeInput' + divNum + '-2-0').value = pasteDataARR[x].split('\t')[1];
                  break;
                case 'Procedure ':
                  document.getElementById('callTypeInput' + divNum + '-2-1').value = pasteDataARR[x].split('\t')[1];
                  break;
                case 'Date Received':
                  document.getElementById('callTypeInput' + divNum + '-2-2').value = pasteDataARR[x].split('\t')[1].split(' ')[0];
                  break;
                case 'Date Paid':
                  document.getElementById('callTypeInput' + divNum + '-2-3').value = pasteDataARR[x].split('\t')[1].split(' ')[0];
                  break;
                case 'Units Claimed':
                  document.getElementById('callTypeInput' + divNum + '-2-4').value = pasteDataARR[x].split('\t')[1];
                  break;
                case 'Allowed Units':
                  document.getElementById('callTypeInput' + divNum + '-2-5').value = pasteDataARR[x].split('\t')[1];
                  break;
                case 'Amount Charged':
                  document.getElementById('callTypeInput' + divNum + '-2-6').value = pasteDataARR[x].split('\t')[1];
                  break;
                case 'Allowed Amount':
                  document.getElementById('callTypeInput' + divNum + '-2-7').value = pasteDataARR[x].split('\t')[1];
                  break;
                case 'DecisionCodes':
                  document.getElementById('callTypeInput' + divNum + '-2-8').value = pasteDataARR[x].split('\t')[1];
                  break;
                case 'ClLineID':
                  document.getElementById('callTypeInput' + divNum + '-2-9').value = pasteDataARR[x].split('\t')[1];
                  break;
                default:
                  break;
              }
            }
          }

          // Cleanup
          currBlock.getElementsByClassName('pasteBox')[0].value = '';
        }
      }
    }
    /*  Parsedata from SC note generator
      // get data from pastebox and split it by row
      var pasteData = document.getElementById("pasteBox").value;
      var pasteDataARR = pasteData.split(/\r?\n/);
      var i = 0;
      // go through each row and see if it starts with a known text, if so add that to the table in correct field
      for(f=0;f<pasteDataARR.length;f++){
        if(pasteDataARR[f].search("Member ID")==0){
          document.getElementById("mbrIDText").value = pasteDataARR[f].slice(10);
        } else if(pasteDataARR[f].search("Name")==0){
          while (pasteDataARR[f].charAt(i) !== "("){i++;}
            document.getElementById("mbrNameText").value = pasteDataARR[f].slice(5,i);
            document.getElementById("mbrDOB").value = pasteDataARR[f].slice(i+6,i+16);
        } else if(pasteDataARR[f].search("Provider")==0){
          i=9;
          while(pasteDataARR[f].charAt(i) !== " "){i++}
          document.getElementById("provIDText").value = pasteDataARR[f].slice(9,i);
          document.getElementById("provNamesText").value = pasteDataARR[f].slice(i+2);
        } else if(pasteDataARR[f].search("Site")==0){
          i=5;
          while(pasteDataARR[f].charAt(i) !== " "){i++}
          document.getElementById("siteID").value = pasteDataARR[f].slice(5,i);
        } else if(pasteDataARR[f].search("Dates Of Service")==0){
          document.getElementById("dos").value = pasteDataARR[f].slice(17);
        } else if(pasteDataARR[f].search("Procedure")==0){
          document.getElementById("pCode").value = pasteDataARR[f].slice(11);
        } else if(pasteDataARR[f].search("DecisionCodes")==0){
          document.getElementById("dCode").value = pasteDataARR[f].slice(14);
        } else if(pasteDataARR[f].search("Member")==0){
          i=0;
          while(pasteDataARR[f].charAt(i) !== "("){i++}
          document.getElementById("mbrNameText").value = pasteDataARR[f].slice(7,i);
          while(pasteDataARR[f].charAt(i) !== ":"){i++}
          var startID = i+2;
          while(pasteDataARR[f].charAt(i) !== ")"){i++}
          document.getElementById("mbrIDText").value = pasteDataARR[f].slice(startID,i);
        }
      }
      document.getElementById("pasteBox").value = "";
    */
  }

  // toggles member satasfied field open and closed 
  function msCheck() {
    if (document.getElementById('mbrSatisfied').checked == true) {
      document.getElementById('mbrNSatisfied').className = 'displayNone';
    } else {
      document.getElementById('mbrNSatisfied').className = 'displayBlock';
    }
    changeHeight();
  }


  // toggles between member and provider fields
  function mpRadio() {
    if (document.getElementById('Member').checked == false) {
      document.getElementById('mbrLine0').className = 'displayNone';
      document.getElementById('mbrEnd').className = 'displayNone';
      document.getElementById('provInfoBlock').className = 'displayBlock';
      changeHeight();
    } else {
      document.getElementById('mbrLine0').className = 'tableRow';
      document.getElementById('mbrEnd').className = 'displayBlock';
      document.getElementById('provInfoBlock').className = 'displayNone';
    }
  }
 
  // goes through each selectBox and if it has a value changes the classname of the correct div to displayBlock setting all other children of selectbox classes as displayNone and callTypeHidden
  function callTypeSel() {
    var divs = document.getElementsByClassName('callTypeDivs');
    for (i = 0; i < divs.length; i++) {
      var blocks = divs.item(i).getElementsByClassName('callTypeHidden');
      for(y = 0; y < blocks.length; y++) {
        blocks.item(y).className = 'displayNone callTypeHidden';
      }
      switch (divs.item(i).getElementsByTagName('select')[0].value) {
        case 'Authorization Status':
          divs.item(i).getElementsByClassName('callTypeHidden').item(0).className = 'displayBlock callTypeHidden';
          break;
        case 'Benefit/Eligibility Information':
          divs.item(i).getElementsByClassName('callTypeHidden').item(1).className = 'displayBlock callTypeHidden';
          break;
        case 'Claim Information':
          divs.item(i).getElementsByClassName('callTypeHidden').item(2).className = 'displayBlock callTypeHidden';
          break;
        case 'Referral Request':
          divs.item(i).getElementsByClassName('callTypeHidden').item(3).className = 'displayBlock callTypeHidden';
          break;
        default:
          break;
      }
    }
    changeHeight();
  }

  //sets height of tDiv to standard height for the number of visible rows 
  function changeHeight() {
    var currentHeightInt = 25 * ($('.tableRow:visible').length);
    var currentHeightStr = currentHeightInt.toString();
    currentHeightStr = currentHeightStr.concat('px');
    document.getElementById('tDiv').style.height = currentHeightStr;
  }

  //Sets vaules of all fields to empty or false
  function clearAll() {
    document.getElementById('callerName').value = '';
    document.getElementById('callbackNumber').value = '';
    document.getElementById('callerRel').value = '';
    document.getElementById('provIDText').value = '';
    document.getElementById('provNamesText').value = '';
    document.getElementById('siteAddress').value = '';
    document.getElementById('mbrSatisfied').checked = false;
    document.getElementById('mbrNSatisfied').checked = false;
    document.getElementById('grievanceOffered').checked = false;
    document.getElementById('grievanceFiled').checked = false;
    document.getElementById('confirmedAddress').checked = false;
    document.getElementById('NPI').checked = false;
    document.getElementById('TIN').checked = false;
    document.getElementById('Member').checked = false;
    document.getElementById('Provider').checked = false;
    document.getElementById('callTypeSelect0').value = '';
    document.getElementById('provInfoBlock').className = 'displayNone';
    document.getElementById('mbrLine0').className = 'displayNone';
    document.getElementById('mbrEnd').className = 'displayNone';
    document.getElementById('mbrNSatisfied').className = 'displayBlock';
    
    for (i = 1; i <= numCallTypes; i++) { 
      document.getElementById('callTypeDiv' + i).remove(); 
    }

    var divs = document.getElementsByClassName('callTypeDivs');
    for (i = 0; i < divs.length; i++) {
      var blocks = divs.item(i).getElementsByClassName('callTypeHidden');
      for (y = 0; y < blocks.length; y++) {
        var inputs = blocks.item(y).getElementsByTagName('input');
        var selects = blocks.item(y).getElementsByTagName('select');
        for (x = 0; x < inputs.length; x++) {
          //console.log(inputs.item(x).value);
          inputs.item(x).value = '';
          inputs.item(x).checked = false;
        }
        for (x = 0; x < selects.length; x++) {
          selects.item(x).value = '';
        }
      }
    }
    numCallTypes = 0;
    callTypeSel();
  }

  // Collects the information from the fields, combines them into an output string, and sends to the clipboard
  function copyClipboard() {
    // collecting information from all the fields & generating output and error texts
    var CALLERNAME = document.getElementById('callerName').value;
    var CBNUM = document.getElementById('callbackNumber').value;
    var CALLERREL = document.getElementById('callerRel').value;
    var PROVID = document.getElementById('provIDText').value;
    var PROVNAME = document.getElementById('provNamesText').value;
    var SITEADD = document.getElementById('siteAddress').value;
    var CNFADD = document.getElementById('confirmedAddress').checked;
    var NPICHK = document.getElementById('NPI').checked;
    var TINCHK = document.getElementById('TIN').checked;
    var MBRCHK = document.getElementById('Member').checked;
    var PROVCHK = document.getElementById('Provider').checked;
    var CALLTYPE = document.getElementById('callTypeSelectMain').value;
    var MBRSAT = document.getElementById('mbrSatisfied').checked;
    var GOFF = document.getElementById('grievanceOffered').checked;
    var GFILED = document.getElementById('grievanceFiled').checked;
    var outputText = '';

    // combining all the data into a single string, any empty required fields are added to error text
    if (CALLERNAME !== '') { outputText = outputText.concat(CALLERNAME, ' / '); }
    if (CALLERREL !== '' && MBRCHK == true) { outputText = outputText.concat(CALLERREL, ' / '); }
    if (CBNUM !== '') { outputText = outputText.concat('CB# ', CBNUM, ' / '); }
    if (NPICHK == true && PROVCHK == true) { outputText = outputText.concat('NPI: ', PROVID); }
    if (TINCHK == true && PROVCHK == true) { outputText = outputText.concat('TIN: ', PROVID); }
    if (SITEADD !== '' && PROVCHK == true) { outputText = outputText.concat(' - ', SITEADD, ' / '); }
    if (CNFADD == true) { outputText = outputText.concat('Confirmed Address on file / '); }
    else if (outputText !== '') { outputText = outputText.concat('Unable to confirm address on file / '); }

    if (CALLTYPE !== '') {
      for (i = 0; i <= numCallTypes; i++) {
        outputText = outputText.concat(document.getElementById('callTypeSelect' + i).value + ' / ');
        for (y = 0; y < 5; y++) {
          if (i == 0) {
            outputText = outputText.concat(document.getElementById('callTypeInput' + y).value);
          } else { outputText = outputText.concat(document.getElementById('callTypeInput' + y + i).value); }
        }
        outputText = outputText.concat(' / ');
      }
    }

    if (MBRCHK == true) {
      if (MBRSAT == true) { outputText = outputText.concat('Member satisfied'); }
      else if (outputText !== '') {
        outputText = outputText.concat('Member unsatsfied / ');
        if (GOFF == true) { outputText = outputText.concat('Grievance was offered / '); }
        else if (outputText !== '') { outputText = outputText.concat('Grievance was not offered / '); }
        if (GFILED == true) { outputText = outputText.concat('Grievance was filed'); }
        else if (outputText !== '') { outputText = outputText.concat('Grievance was not filed'); }
      }
    }
    // displays the output text box momentarily and fills it with the output text
    document.getElementById('oText').style.display = 'block';
    document.getElementById('oText').value = outputText;
    // select and copy the information in the output text box, then hides the information again
    var copyTextarea = document.getElementById('oText');
    copyTextarea.focus();
    copyTextarea.select();
    try { document.execCommand('copy'); }
    catch (err) { alert('Oops, unable to copy'); }
    document.getElementById('oText').style.display = 'none';
    console.log(outputText)
  }
</script>
<!--Code hosted on Github @ https://github.com/Jared-matos/NoteGenerator-->

<!--Remove all text above style when importing to SharePoint-->